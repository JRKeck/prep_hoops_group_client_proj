prepHoopsApp.controller("DashboardController",["$scope","$http","$location","$modal","siteFullName",function(t,e,s,a,r){console.log("Dashboard script loaded"),t.sites=[],t.dates=[],t.feeds=[],t.totalArticles=[],t.dailyAvg=[],t.percentPaid=[],t.zeroDays=[],t.getLastParseDate=function(){e.get("/parseRSS/getLastDate").success(function(e){t.lastParseDate=new Date(e[0].date);var s=new Date(e[0].date);t.thirtyDaysBefore=new Date(s.setDate(t.lastParseDate.getDate()-30));var a=t.lastParseDate.toISOString();t.shortFirstDateString=a.substr(0,a.indexOf("T"));var r=t.thirtyDaysBefore.toISOString();t.shortSecondDateString=r.substr(0,r.indexOf("T")),t.getThirtyDaysOfArticles(t.shortSecondDateString,t.shortFirstDateString)})},t.getLastParseDate(),t.getDayOfWeek=function(e){t.dayOfWeek=e.getDay()},t.getFeeds=function(){e.get("/network/getFeeds").success(function(e){t.feeds=e,r.set("feedsArray",e)})},t.runParse=function(){e.get("/parseRSS").success(function(t,e){console.log(e)})},t.go=function(t){s.path(t),r.set("siteFullName",this.site.siteFullName)},t.getThirtyDaysOfArticles=function(s,a){e.post("/api/articleGet",[s,a]).success(function(e){t.getFeeds(),t.dates=e,t.getStats(e)})},t.getRSS=function(s,a){var r=s.toISOString();t.shortFirstDateString=r.substr(0,r.indexOf("T"));var i=a.toISOString();t.shortSecondDateString=i.substr(0,i.indexOf("T")),e.post("/api/articleGet",[t.shortFirstDateString,t.shortSecondDateString]).success(function(e){t.getFeeds(),t.dates=e,t.getStats(e)})},t.getStats=function(e){t.totalSiteArticles=0,t.totalArticles=[],t.dailyAvg=[],t.zeroDays=[];for(var s=0,a=1;18>a;a++){for(var r=0;r<e.length;r++)for(var i=0;i<e[r].site.length;i++)e[r].site[i].siteID===a&&(t.totalSiteArticles=t.totalSiteArticles+e[r].site[i].articles.length,0===e[r].site[i].articles.length&&s++);t.totalArticles.push(t.totalSiteArticles),t.dailyAvg.push(t.totalSiteArticles/e.length),t.zeroDays.push(s),t.totalSiteArticles=0,s=0}},t.open=function(e,s){e.preventDefault(),e.stopPropagation(),t[s]=!0},t.status={opened:!1},t.today=function(){t.first=new Date,t.last=new Date},t.today(),t.clear=function(){t.first=null,t.last=null},t.animationsEnabled=!0,t.openModal=function(e){t.selectedArticles=this.site.articles;a.open({animation:t.animationsEnabled,templateUrl:"/assets/views/routes/articleUrl.html",controller:"ArticleInstanceController",size:e,resolve:{selectedArticles:function(){return t.selectedArticles}}})}}]),prepHoopsApp.controller("ArticleInstanceController",["$scope","$modalInstance","selectedArticles",function(t,e,s){t.modalArticles=s,t.articleUrlArray=[];for(var a=0;a<t.modalArticles.length;a++)t.articleUrlArray.push(t.modalArticles[a].url);t.ok=function(){e.close()}}]);